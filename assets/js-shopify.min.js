const global={sanitizePrice:function(t){return siteMoneyFormat.includes("amount_with_comma_separator")?t.replaceAll(/\.|\,/g,(function(t){return","==t?".":","})):t},formatSplitPrice:function(t){if(!t)return!1;const e=this.sanitizePrice(t).match(/([^0-9]*)([0-9,]+[\\\\.\\\\,]?[0-9]*)([^0-9]*)/);return{symbol:e[1],value:parseFloat(e[2].replace(/[\\\\,]/g,"")),currency:e[3]}},formatShopifyMoney:function(t){const e=Number(t).toFixed(2),r=siteMoneyFormat.includes("amount_with_comma_separator")?formatNumberEuro(e).replace(",00",""):formatNumberCommas(e).replace(".00","");return siteMoneyFormat.replace(/\{\{(.*?)\}\}/gs,r)}},cWysiwygShopify={init:function(){const t=document.querySelector(".shopify-policy__body");t?.firstElementChild.classList.add("wysiwyg","wysiwyg-page"),document.querySelectorAll(".wysiwyg meta[charset], .wysiwyg-page meta[charset]").forEach((t=>t.remove()))}},cItemVariants={updateVariantPillCurrentSelection:function(t,e,r){const n=t.closest(".js-variant-group").querySelector(".js-variant-pills-selected");n&&(n.dataset.label=e,n.dataset.labelCurrent=r)},init:function(){on("body","mouseover",".js-variant-group .js-variant-selector",(t=>{const e=t.target.closest(".js-variant-selector");this.updateVariantPillCurrentSelection(e,e.value,e.dataset.label)})),on("body","mouseout",".c-product-form .js-variant-selector",(t=>{const e=t.target.closest(".js-variant-selector"),r="INPUT"==e.tagName,n=document.querySelector(`[name="${e.name}"]${r?":checked":""}`);this.updateVariantPillCurrentSelection(e,"",n?n.dataset.label:"")}))}},cItemSellingPlan={updatePrice:function(t,e){t.querySelectorAll(".js-price-regular").forEach((t=>{t.classList.contains("js-not-update-price")||(t.textContent=e)}))},init:function(){on("body","change",'.c-item-selling-plan input[type="radio"][name*="selling-plan-"]',(t=>{const e=t.target.closest('input[type="radio"][name*="selling-plan-"]'),r=e.dataset.itemSellingPlanPrice;document.querySelectorAll(".c-item-selling-plan").forEach((t=>{const n=t.closest(".c-product-form"),o=t.querySelector('[name="selling_plan"]');t.classList.toggle("is-active","subscription"==e.value),o.disabled="subscription"!=e.value,t.querySelector(`input[value="${e.value}"]`).checked=!0,this.updatePrice(n,r)}))})),on("body","change",'.c-item-selling-plan [name="selling_plan"]',(t=>{document.querySelectorAll('.c-item-selling-plan [name="selling_plan"]').forEach((e=>{e!=t.target&&(e.value=t.target.value)}))}))}},cItemQuantity={updateQuantity:function(t,e){const r=t.querySelector('input[name="quantity"]'),n=t.querySelector('[data-trigger="decrease"]'),o=t.querySelector('[data-trigger="increase"]'),i=parseInt(r.value),a=e?Math.min(1,parseInt(r.max)-i):Math.max(-1,parseInt(r.min)-i),s=i+(void 0!==e?a:0),c="true"==r.dataset.leadingZero?formatPad(s):s;if(n.disabled=s<=r.min,o.disabled=s>=r.max,c!=r.value){r.value=c;const t=new Event("change");r.dispatchEvent(t)}},init:function(){on("body","click",".c-item-quantity [data-trigger]",(t=>{const e=t.target.closest("[data-trigger]"),r=e.closest(".c-item-quantity");this.updateQuantity(r,"increase"==e.dataset.trigger)}))}},cProductForm={saveVariantSelection:function(t,e,r){t.querySelectorAll(".js-variant-selector").forEach((t=>{const r="INPUT"==t.tagName?!!t.checked&&t.value:t.value;r&&e.variantTitle.push(r)})),e.variantIndex=r.findIndex((t=>t.title===e.variantTitle.join(" / "))),e.variantObject=r[e.variantIndex]},updatePrice:function(t,e){t.querySelectorAll(".c-item-price").forEach((t=>{const r=parseFloat(t.dataset.regularPriceAdj)||1,n=t.querySelector(".js-price-regular"),o=e.price;if(n){const{value:t}=global.formatSplitPrice(o),e=global.formatShopifyMoney(t*r);n.innerText=e}const i=t.querySelector(".js-price-compare");if(i){const t=e.priceCompare,{value:r}=global.formatSplitPrice(t),n=global.formatShopifyMoney(r);i.innerText=t&&t!=o?n:""}}))},updateQuantity:function(t,e){const r=e.inventory,n=t.querySelector('input[name="quantity"]');n&&(n.max=r),parseInt(n.value)>r&&0!=r&&(n.value=r);const o=t.querySelector(".c-item-quantity");cItemQuantity.updateQuantity(o)},updateFormId:function(t,e){t.querySelector('input[name="id"]').value=e.id},updateFormSubmitState:function(t,e){const r=t.querySelector(".js-form-submit");e.inventory<=0?(t.dataset.available=!1,r.disabled=!0):(t.dataset.available=!0,r.disabled=!1)},updateUrl:function(t){window.history.replaceState({},"",`?variant=${t.id}`)},updateVariantDisabledState:function(t,e){const r=t.querySelectorAll(".js-variant-group"),n=e.filter((t=>t.inventory>0));if(r.length<=1)return!1;const o=Array.from(r).map((t=>{const e=t.querySelector("input.js-variant-selector"),r=t.querySelector(".js-variant-selector"+(e?":checked":""));return!(!r||""==r.value)&&r.value}));if(o.includes(!1))return!1;Array.from(r).forEach(((t,e)=>{const r=t.querySelector("input.js-variant-selector");t.querySelectorAll(".js-variant-selector"+(r?":not(:checked)":" option:not(:checked)")).forEach((t=>{const r=[...o];r[e]=t.value;const i=n.some((t=>{const e=r.join(" / ");return t.title===e}));t.disabled=!i,"OPTION"===t.tagName&&(t.innerText=`${t.value}${i?"":" - sold out"}`)}))}))},initGiftCard:function(t){const e=t.querySelector(".js-gift-card-fields");if(e){const t=e.querySelector(".js-recipient-date"),r=e.querySelector(".js-recipient-email"),n=e.querySelector(".js-recipient-name"),o=e.querySelector(".js-recipient-message");on("body","click",".js-gift-card-toggle",(i=>{i.target.checked?(e.classList.add("is-active"),r.required=!0):(e.classList.remove("is-active"),r.required=!1,r.value=null,t.value=null,o.value=null,n.value=null)}));const i=t=>{let e=t.getDate(),r=t.getMonth()+1;return e<10&&(e="0"+e),r<10&&(r="0"+r),t.getFullYear()+"-"+r+"-"+e},a=90;let s=new Date,c=new Date;c=new Date(c.setDate(c.getDate()+a)),s=i(s),c=i(c),t.setAttribute("min",s),t.setAttribute("max",c),on("body","input",".js-recipient-date",(e=>{const r=t.validity;r.rangeUnderflow?t.setCustomValidity("Date must be today or later."):r.rangeOverflow&&t.setCustomValidity("Date must be within 90 days from today.")}))}},init:function(){document.querySelectorAll(".c-product-form").forEach((t=>{if(!t.dataset.variantsJson)return!1;const e=validateJson(t.dataset.variantsJson.replace(/'/g,'"').trim());"true"==t.dataset.updateVariantDisabledState&&this.updateVariantDisabledState(t,e);this.saveVariantSelection(t,{selectorIndex:null,variantTitle:[],variantIndex:null,variantObject:null},e),this.initGiftCard(t)})),on("body","change",".c-product-form .js-variant-selector",(t=>{const e=t.target.closest(".js-variant-selector").closest(".c-product-form"),r=validateJson(e.dataset.variantsJson.replace(/'/g,'"').trim()),n={selectorIndex:null,variantTitle:[],variantIndex:null,variantObject:null};e&&r&&this.saveVariantSelection(e,n,r);const o=n.variantObject;e&&o&&(this.updatePrice(e,o),this.updateQuantity(e,o),this.updateFormId(e,o),this.updateFormSubmitState(e,o),"true"==e.dataset.updateVariantUrl&&this.updateUrl(o),"true"==e.dataset.updateVariantDisabledState&&this.updateVariantDisabledState(e,r))}))}},cCart={updateCartStats:function(){fetch("/cart.js").then((t=>t.json())).then((t=>{const e=t.item_count;document.querySelectorAll(".js-cart-item-count").forEach((t=>{t.innerText=e,t.classList.toggle("is-active",e>0)})),e>0?root.classList.remove("is-cart-empty"):root.classList.add("is-cart-empty"),document.querySelectorAll(".c-cart").forEach((t=>t.setAttribute("data-item-count",e)));let r=0;if(t.items.forEach((t=>{if(t.selling_plan_allocation){const e=t.selling_plan_allocation.price||0,n=((t.selling_plan_allocation.compare_at_price||0)-e)*t.quantity;r+=n}})),r>0){const e=`${formatNumberCommas((r/100).toFixed(2)).replace(".00","")}`;document.querySelectorAll(".js-cart-discount-subscription").forEach((t=>{t.innerText=`$${e}`}));const n=(r+t.original_total_price)/100,o=`${formatNumberCommas(n.toFixed(2)).replace(".00","")}`;document.querySelectorAll(".js-cart-total-price").forEach((t=>{t.innerText=`$${o}`}))}else{document.querySelectorAll(".js-cart-discount-subscription").forEach((t=>{t.innerText="",t.closest(".c-cart__summary__discount")?.classList.add("hidden")}));const e=t.original_total_price/100,r=`${formatNumberCommas(e.toFixed(2)).replace(".00","")}`;document.querySelectorAll(".js-cart-total-price").forEach((t=>{t.innerText=`$${r}`}))}const n=t.total_discount/100,o=`${formatNumberCommas(n.toFixed(2)).replace(".00","")}`;document.querySelectorAll(".js-cart-discount-total").forEach((t=>{t.innerText=`$${o}`}));const i=t.total_price/100,a=`${formatNumberCommas(i.toFixed(2)).replace(".00","")}`;document.querySelectorAll(".js-cart-total-price-amount").forEach((t=>{t.innerText=`$${a}`}));const s=document.querySelector(".js-freeshipping-threshold");if(s){const e=parseFloat(t.total_price/100);this.updateFreeShipping(e,s)}})).catch((t=>{console.error("Error:",t)}))},updateCartContent:function(){const t=document.querySelectorAll(".c-cart");t.forEach((t=>t.classList.add("is-content-updating"))),this.updateCartStats(),fetch("/cart").then((t=>t.text())).then((e=>{const r=parseHtmlString(e);t.forEach((t=>{t.innerHTML=r.querySelector(".c-cart").innerHTML,t.classList.remove("is-content-updating")})),this.initLineItem(),this.initUpsell()})).catch((t=>{console.error("Error:",t)}))},getLineItem:function(t){const e=t.closest(".c-line-item");return{item:e,key:e.dataset.itemKey}},getItemData:function(t){const e=t.querySelector('[name="id"]').value,r=t.querySelector('[name="quantity"]')?.value||1,n=t.querySelector('[name="selling_plan"]:not(:disabled)'),o=n?n.value:null,i={};t.querySelectorAll('[name*="properties["]').forEach((t=>{const e=t.name.match(/\[(.*?)\]/)[1];t.value&&(i[e]=t.value)}));return{id:e,quantity:r,selling_plan:o,properties:i}},addItems:function({items:t,updateCartContent:e=!0,updateCartStats:r=!1,callback:n}){fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:t})}).then((t=>t)).then((()=>{e&&this?.updateCartContent(),r&&this?.updateCartStats(),n&&n()})).catch((t=>{console.error("Error:",t)}))},updateLineItems:function({items:t,updateCartContent:e=!1,updateCartStats:r=!0,callback:n}){fetch("/cart/update.js",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({updates:t})}).then((t=>{t.json()})).then((()=>{e&&this?.updateCartContent(),r&&this?.updateCartStats(),n&&n()})).catch((t=>{console.error("Error:",t)}))},isLineItemEventAttached:!1,initLineItem:function(t){const e=(t,e)=>{const r={};return r[t]=e,r};document.querySelectorAll('.c-line-item input[name="quantity"]').forEach((t=>{t.addEventListener("change",(t=>{const r=t.target.closest('input[name="quantity"]'),n=parseInt(r.value)||1,{key:o}=this.getLineItem(t.target),i=e(o,n);this.updateLineItems({items:i})}))})),this.isLineItemEventAttached||(this.isLineItemEventAttached=!0,on("body","click",".c-line-item .js-item-remove-trigger",(t=>{const{item:r,key:n}=this.getLineItem(t.target),o=e(n,0);this.updateLineItems({items:o}),r.classList.add("is-removed"),this.restoreUpsellItem(r)})),on("body","change",".c-line-item .js-variant-selector",(t=>{const r=t.target.closest(".js-variant-selector"),{item:n,key:o}=this.getLineItem(r);n.classList.add("is-variant-updating"),loader.updateProgress(root);const i="INPUT"==r.tagName?!!r.checked&&r.value:r.value,a=validateJson(n.dataset.variantsJson.replace(/'/g,'"').trim()),s=a.findIndex((t=>t.id===i)),c=a[s],l=this.getItemData(n);l.id=c.id,parseInt(l.quantity)>c.inventory&&(l.quantity=c.inventory);const u=()=>{fetch("/cart").then((t=>t.text())).then((t=>{const e=parseHtmlString(t).querySelector(".c-cart .c-line-item:first-child").dataset.itemKey;n.dataset.itemKey=e,((t,e)=>{cProductForm.updatePrice(t,e),cProductForm.updateQuantity(t,e),cProductForm.updateFormId(t,e);const r=t.querySelector(".js-item-thumb img");e.imageSrc&&r&&(r.src=e.imageSrc,r.srcset="")})(n,c),n.classList.remove("is-variant-updating"),loader.complete(root)})).catch((t=>{console.error("Error:",t)}))};this.addItems({items:[l],updateCartContent:!1,updateCartStats:!1,callback:()=>{const t=e(o,0);this.updateLineItems({items:t,callback:u})}})})))},updateCartNote:function(t){fetch("/cart/update.js",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({note:t})}).then((t=>t.json())).catch((t=>{console.error("Error:",t)}))},updateGiftWrap:function(t={}){fetch("/cart/update.js",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({attributes:t})}).then((t=>t.json())).catch((t=>{console.error("Error:",t)}))},updateDiscount:function(t){function e(t){const e=document.querySelector(".g-minicart__content");[...e.querySelectorAll("button"),...e.querySelectorAll("input")].forEach((e=>t?e.setAttribute("disabled","disabled"):e.removeAttribute("disabled")))}e(!0),fetch(`/discount/${t}`).then((()=>fetch("/cart"))).then((t=>t.text())).then((function(t){const e=(new DOMParser).parseFromString(t,"text/html"),r=document.querySelector(".c-cart"),n=e.querySelector(".c-cart"),o=t=>{const e=r.querySelectorAll(t),o=n.querySelectorAll(t);e.length>0&&o.length>0&&e.forEach(((t,e)=>t.innerHTML=o[e].innerHTML))};o(".js-line-item-price"),o(".js-cart-total-price"),function(t,e){const r=e.querySelector(".js-cart-discount-success"),n=t.querySelector(".js-cart-discount"),o=(n.dataset.success,n.dataset.error);if(r&&n)n.outerHTML=r.outerHTML;else if(!r&&n){const t=n.querySelector(".js-cart-discount-input");t.value="",t.placeholder=o}}(r,n)})).catch((t=>{console.error("Error:",t)})).finally((()=>{e(!1)}))},isUpsellInit:!1,upsellProductHandles:[],initUpsell:async function(){const t=document.querySelector(".js-upsell");if(!t)return;const e=document.querySelector(".js-upsell-item-list");null==e.querySelector(".js-upsell-item-form")&&await this.createUpsell(e);const r=this.filterUpsellItems();this.isUpsellInit||(this.isUpsellInit=!0,this.storeUpsellProducts(),this.activeUpsellNavigation(t)),this.toggleUpsellVisibility(r)},createUpsell:async function(t){const e=[...document.querySelectorAll(".js-line-item")],r=e?.map((t=>t.getAttribute("data-product-id")));if(0===r.length)return void document.querySelector(".js-upsell").classList.add("is-no-upsell-items");const n=await this.fetchUpsellItems(r);if(0===n.length)return;const o=this.createUpsellItemCards(n);return o?.forEach((e=>{t?.appendChild(e)})),this.storeUpsellProducts(),this.createUpsellDots(o.length),n},fetchUpsellItems:async function(t){if(0===t.length)return[];return(await Promise.all(t.map((async e=>{const r=await fetch(window.Shopify.routes.root+`recommendations/products.json?product_id=${e}&intent=related`);return[...(await r.json()).products.filter((e=>e.available&&!t.includes(e.id)))]})))).flat().filter(((t,e,r)=>e===r.findIndex((e=>e.id===t.id))))},toggleUpsellVisibility:function(t){const e=document.querySelector(".js-upsell");e&&(e.classList.toggle("has-upsell-items",t?.length>0),e.classList.toggle("is-only-one-upsell-item",1===t?.length))},createUpsellItemCards:function(t){return t.map(((t,e)=>{const r=t.variants.find((t=>t.available)),n=`\n\t\t\t\t<form\n\t\t\t\t\tclass="c-upsell-item c-product-form js-upsell-item-form ${0===e&&"is-active"}"\n\t\t\t\t\taction="/cart/add"\n\t\t\t\t\tmethod="post"\n\t\t\t\t\tdata-product-id="${r.id}"\n\t\t\t\t\tdata-product-handle="${t.handle}"\n\t\t\t\t>\n\t\t\t\t\t<p class="c-upsell-item__header">\n\t\t\t\t\t\tYou may like this\n\t\t\t\t\t</p>\n\n\t\t\t\t\t<div class="c-upsell-item__item f-h f-a-s">\n\t\t\t\t\t\t<div class="c-upsell-item__thumb">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref="${t.url}"\n\t\t\t\t\t\t\t\tclass="object-fit bg-subtle"\n\t\t\t\t\t\t\t\ttitle="${t.title}"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${t.featured_image?`<img src="${window.Shopify.routes.root+t.featured_image}">`:""}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="c-upsell-item__info f-v">\n\t\t\t\t\t\t\t<div class="c-upsell-item__title">\n\t\t\t\t\t\t\t\t${r.name}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class="c-upsell-item__price">\n\t\t\t\t\t\t\t\t$${r.price/100}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype="submit"\n\t\t\t\t\t\t\t\tclass="c-upsell-item__add btn-underline js-form-submit"\n\t\t\t\t\t\t\t\taria-label="Add item to cart"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tAdd to cart\n\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t<input type="hidden" name="id" value="${r.id}">\n\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype="hidden"\n\t\t\t\t\t\t\t\tname="properties[_upsell]"\n\t\t\t\t\t\t\t\tvalue="true"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t`,o=document.createElement("div");return o.innerHTML=n,o.firstElementChild}))},createUpsellDots(t){const e=document.querySelector(".js-upsell-dot-group");t<=1||!e||Array.from({length:t}).forEach(((t,r)=>{const n=document.createElement("button");n.classList="c-cart__upsell__dot js-upsell-dot "+(0===r?"is-active":""),e.appendChild(n)}))},activeUpsellNavigation:function(t){const e=t.querySelector(".js-upsell-arrow"),r=t.querySelector(".js-upsell-dot-group");e?this.activeUpsellArrowNav():r&&this.activeUpsellDotsNav()},activeUpsellArrowNav:function(){let t=0;const e=(t,e)=>t.forEach(((t,r)=>t.classList.toggle("is-active",r===e)));on("body","click",".js-upsell-arrow-left",(()=>{const r=document.querySelectorAll(".js-upsell-item-form");t--,t<0&&(t=r?.length-1),e(r,t)})),on("body","click",".js-upsell-arrow-right",(()=>{const r=document.querySelectorAll(".js-upsell-item-form");t++,t>r?.length-1&&(t=0),e(r,t)}))},activeUpsellDotsNav:function(){on("body","click",".js-upsell-dot",(t=>{const e=document.querySelectorAll(".js-upsell-item-form");e.forEach((t=>t.classList.remove("is-active")));const r=t.target.closest(".js-upsell-dot"),n=Array.from(r.parentNode.children);n.forEach((t=>t.classList.remove("is-active"))),r.classList.add("is-active");const o=n.indexOf(r);e[o]?.classList.add("is-active")}))},filterUpsellItems:function(){const t=[...document.querySelectorAll(".js-line-item")],e=[...document.querySelectorAll(".js-upsell-item-form")];if(0==t.length||0==e.length)return;e.filter((e=>t.find((t=>e.getAttribute("data-product-handle")==t.getAttribute("data-product-handle"))))).forEach((t=>t.remove()));const r=document.querySelectorAll(".js-upsell-item-form");r[0]?.classList.add("is-active");const n=document.querySelector(".js-upsell-dot-group");return n&&(n.innerHTML="",this.createUpsellDots(r.length)),r},restoreUpsellItem:function(t){if(null==document.querySelector(".js-upsell"))return;const e=t.getAttribute("data-product-handle");0!=this.upsellProductHandles.includes(e)&&fetch(window.Shopify.routes.root+`products/${e}.js`).then((t=>t.json())).then((t=>{const e=this.createUpsellItemCards([t])[0],r=document.querySelector(".js-upsell-item-list");r.querySelectorAll(".js-upsell-item-form").forEach((t=>t.classList.remove("is-active"))),r.insertBefore(e,r.firstChild);const n=document.querySelector(".js-upsell-dot-group");if(n){n.innerHTML="";const t=document.querySelectorAll(".js-upsell-item-form").length;this.createUpsellDots(t)}const o=document.querySelectorAll(".js-upsell-item-form");this.toggleUpsellVisibility(o)}))},storeUpsellProducts:function(){this.upsellProductHandles.length>0||(this.upsellProductHandles=[...document.querySelectorAll(".js-upsell-item-form")].map((t=>t.getAttribute("data-product-handle"))))},updateFreeShipping:function(t,e){const r=parseFloat(e.dataset.freeshippingThreshold),n=e.querySelector(".js-freeshipping-progress-bar"),o=e.querySelector(".js-freeshipping-diff");e.classList.toggle("is-freeshipping",t>=r);const i=r-t,a=global.formatShopifyMoney(i).replace(".00","").replace(/[^$\d,\.]/g,"");o.innerHTML=a,n.style.width=t>r?"100%":`${(t/r*100).toFixed(0)}%`},getMinicartDom:function(){return document.querySelector(".g-minicart")},minicartClose:function(){root.classList.remove("is-minicart-active"),history.replaceState(null,null," "),scrollEnable(),this.getMinicartDom()?.setAttribute("aria-hidden","true")},minicartOpen:function(){root.classList.add("is-minicart-active"),history.replaceState(null,null,"#cart"),scrollDisable(),this.getMinicartDom()?.setAttribute("aria-hidden","false"),this.updateAriaHiddenInCart()},initMinicart:function(){this.getMinicartDom()?.setAttribute("aria-hidden","true"),on("body","click",".js-minicart-close",this.minicartClose.bind(this)),on("body","click",".js-minicart-open",this.minicartOpen.bind(this)),on("body","click",".js-minicart-toggle",(t=>{root.classList.contains("is-minicart-active")?this.minicartClose():this.minicartOpen()})),on("body","keydown","body",(t=>{"Escape"==t.key&&this.minicartClose()})),"#cart"==location.hash&&this.minicartOpen()},updateAriaHiddenInCart:function(t=!1){document.querySelectorAll(".c-cart").forEach((e=>{const r=parseInt(e.dataset?.itemCount,10)||0,n=e.querySelector(".js-cart-empty"),o=e.querySelector(".js-cart-wrapper");t?(n.setAttribute("aria-hidden","true"),o.setAttribute("aria-hidden","true")):(n.setAttribute("aria-hidden",r>0),o.setAttribute("aria-hidden",r<=0))}))},updateFocusableElementsInCart:function(t,e){t&&(t.querySelector(".js-cart-empty").setAttribute("aria-hidden",e>0),t.querySelector(".js-cart-wrapper").setAttribute("aria-hidden",e<=0))},observeAriaHiddenChanges:function(){const t=this.getMinicartDom();if(!t)return;new MutationObserver((e=>{e.forEach((e=>{if("attributes"===e.type&&"aria-hidden"===e.attributeName){const e="true"===t.getAttribute("aria-hidden");this.updateAriaHiddenInCart(e)}}))})).observe(t,{attributes:!0,attributeFilter:["aria-hidden"]})},init:function(){on("body","submit",'form[action="/cart/add"]',(t=>{t.preventDefault();const e=t.target.closest('form[action="/cart/add"]'),r=this.getItemData(e);loader.updateProgress(root),this.addItems({items:[r],callback:()=>{loader.complete(root),this.minicartOpen()}})})),this.observeAriaHiddenChanges(),on("body","change",".js-cart-note-text",(t=>{const e=document.querySelector(".js-cart-note-checkbox"),r=t.target.value;r&&e.checked&&this.updateCartNote(r)})),on("body","change",".js-cart-note-checkbox",(t=>{const e=document.querySelector(".js-cart-note-text");t.target.checked?(e.classList.add("is-active"),this.updateCartNote(e.value)):(e.classList.remove("is-active"),this.updateCartNote(""))})),on("body","change",".js-cart-gift-wrap-checkbox",(t=>{const e=t.target.closest(".js-cart-gift-wrap-checkbox").checked?{"Gift wrap":"Yes"}:{"Gift wrap":"No"};this.updateGiftWrap(e)})),on("body","submit",".js-cart-discount",(t=>{t.preventDefault();const e=t.target.querySelector(".js-cart-discount-input").value;this.updateDiscount(e)})),this.initLineItem(),this.initUpsell(),this.initMinicart()}},cInfiniteScroll={createNewInfiniteScroll(t){let e=t.dataset.infiniteScrollId,r=InfiniteScroll.data(`.js-infinite-scroll-grid-${e}`);return r&&r.destroy(),new InfiniteScroll(`.js-infinite-scroll-grid-${e}`,{path:`.js-infinite-scroll-next-${e}`,append:`.js-infinite-scroll-item-${e}`,button:`.js-load-more-btn-${e}`,scrollThreshold:!1,history:!1})},computeProgressBarWidth(t,e){const r=document.querySelector(".js-progress-bar");r&&(r.style.width=`${Math.round(t/e*100)}%`)},computeCount(t){const e=t.querySelector(".js-pagination");return{maxItemCount:parseInt(e.dataset.itemCount),paginateCount:parseInt(e.dataset.paginateCount)}},init(){document.querySelector('[class^="js-infinite-scroll-next-"]')?document.querySelectorAll(".js-infinite-scroll").forEach((t=>{let e=cInfiniteScroll.createNewInfiniteScroll(t);t.querySelector(".c-pagination__end-message");const{maxItemCount:r,paginateCount:n}=cInfiniteScroll.computeCount(t);let o=n;cInfiniteScroll.computeProgressBarWidth(o,r),e.on("request",(()=>{loader.updateProgress(root)})),e.on("append",(()=>{loader.complete(root),o=Math.min(o+n,r);if(t.querySelector(".js-viewed-count").innerText=o,cInfiniteScroll.computeProgressBarWidth(o,r),o==r){t.querySelector(".js-pagination").classList.add("is-max-items")}})),e.on("error",(()=>{loader.complete(root)})),e.on("last",(()=>{loader.complete(root)}))})):cInfiniteScroll.computeProgressBarWidth(1,1)}},cFiltersSort={getPriceRangeSelections:function(t){const e=[];return t.closest(".c-filters-sort").querySelectorAll('input[type="number"]').forEach((t=>{t.value&&e.push({name:t.name,value:t.value})})),e},getFiltersSelection:function(t){const e=[];return t.closest(".c-filters-sort").querySelectorAll('input[type="checkbox"]:checked').forEach((t=>{t.value&&e.push({name:t.name,value:t.value})})),e},getSortSelection:function(t){const e=t.closest(".c-filters-sort").querySelector("select");return!(!e||"manual"==e.value)&&e.value},getFilterSortUrl:function(t){const e=this.getPriceRangeSelections(t).map((t=>`${t.name}=${t.value}`)).join("&"),r=this.getFiltersSelection(t).map((t=>`${t.name}=${t.value}`)).join("&"),n=this.getSortSelection(t),o=!!n&&`sort_by=${n}`,i=[];e&&i.push(e),r&&i.push(r),o&&i.push(o);return encodeURI(i.join("&"))},updateFilterSort:function({urlParamString:t,elTarget:e,replaceState:r,reinitPanel:n=!1}){loader.updateProgress(root),root.classList.add("is-filters-sort-updating");const o=new URLSearchParams(window.location.search),i=new URLSearchParams;for(const[t,e]of o.entries())t.includes("filter")||t.includes("sort_by")||i.append(t,e);const a=[Array.from(i).map((t=>`${t[0]}=${t[1]}`)).join("&"),t].filter(Boolean).join("&"),s=encodeURI(a);fetch(`?${s}`).then((t=>t.text())).then((t=>{const r=parseHtmlString(t),o=Array.from(r.querySelectorAll(".js-filters-sort-update")),i=e?e.closest(".js-filters-sort-update"):null;if(document.querySelectorAll(".js-filters-sort-update").forEach(((t,e)=>{t!=i&&o[e]&&(t.innerHTML=o[e].innerHTML)})),n){const t=document.querySelector(".js-filters-sort-panel");this.panelUpdate(t)}this.panelFilterSortUpdate(),loader.complete(root),root.classList.remove("is-filters-sort-updating"),cInfiniteScroll.init()})).catch((t=>{console.error("Error:",t)})),r?window.history.replaceState({},"",`?${s}`):window.history.pushState({},"",`?${s}`)},updateSortCurrent:function(t){const e=t.closest(".js-filters-sort-dropdown-sorting");e&&(e.querySelector(".js-filter-dropdown-toggle").dataset.current="manual"==t.value?"":`: ${t.options[t.selectedIndex].text}`)},panelClose:function(){root.classList.remove("is-filters-sort-panel-active")},panelOpen:function(){root.classList.add("is-filters-sort-panel-active")},panelFilterSortUpdate:function(){const t=document.querySelectorAll(".c-filters-sort__selection .js-filters-sort-update");document.querySelectorAll(".js-filters-sort-panel-body .js-filters-sort-update").forEach(((e,r)=>{e.innerHTML=t[r].innerHTML})),document.querySelector(".c-filters-sort .js-filters-sort-panel-active").innerHTML=document.querySelector(".c-filters-sort .js-filters-sort-active").innerHTML},panelUpdate:function(t){if(!t)return!1;const e=t.querySelector(".js-filters-sort-panel-body");e.innerHTML="",document.querySelectorAll(".c-filters-sort .js-filters-sort-dropdown").forEach((t=>{const r=t.cloneNode(!0);e.appendChild(r)})),t.querySelectorAll(".js-filters-sort-dropdown").forEach((t=>{t.classList.remove("tablet-up-only"),t.querySelectorAll("input").forEach((t=>{t.id=`panel-${t.id}`})),t.querySelectorAll("label").forEach((t=>{t.htmlFor=`panel-${t.htmlFor}`}))}))},initPanel:function(){const t=document.querySelector(".js-filters-sort-panel"),e=t.cloneNode(!0);e.classList.add("c-filters-sort"),document.body.appendChild(e),t.remove(),this.panelUpdate(e),this.panelFilterSortUpdate(),on("body","click",".js-filters-sort-panel-close",this.panelClose),on("body","click",".js-filters-sort-panel-open",this.panelOpen),on("body","click",".js-filters-sort-panel-toggle",(t=>{root.classList.contains("is-filters-sort-panel-active")?this.panelClose():this.panelOpen()})),on("body","keydown","body",(t=>{"Escape"==t.key&&this.panelClose()}))},init:function(){document.querySelector(".js-filters-sort-panel")&&this.initPanel(),on("body","click","body",(t=>{const e=t.target,r=e.closest(".js-filter-dropdown-toggle");document.querySelectorAll(".js-filters-sort-dropdown").forEach((t=>{const n=t.querySelector(".js-filter-dropdown-toggle");r&&r==n?t.classList.toggle("is-dropdown-active"):!e.closest(".js-filters-sort-dropdown-content")&&t.classList.remove("is-dropdown-active")}))})),on("body","change",".js-filter-input",(t=>{this.updateFilterSort({urlParamString:this.getFilterSortUrl(t.target),target:t.target})})),on("body","click",".js-filter-apply",(t=>{this.updateFilterSort({urlParamString:this.getFilterSortUrl(t.target),target:t.target})})),on("body","submit",".js-filter-form",(t=>{t.preventDefault(),this.updateFilterSort({urlParamString:this.getFilterSortUrl(t.target),target:t.target})})),on("body","change",".js-sort-selector",(t=>{const e=t.target.closest("select");this.updateFilterSort({urlParamString:this.getFilterSortUrl(t.target),target:e}),this.updateSortCurrent(e)})),window.addEventListener("popstate",(t=>{document.querySelector(".js-filter-form")&&this.updateFilterSort({urlParamString:location.search.replace("?",""),replaceState:!0})})),on("body","click",".js-filter-remove",(t=>{t.preventDefault();const e=t.target.closest(".js-filter-remove"),r=e.dataset.url.replace(`${location.pathname}`,"").replace("?","");e.remove(),this.updateFilterSort({urlParamString:r,elTarget:e,reinitPanel:!0})})),on("body","click",".js-filter-remove-all",(t=>{t.preventDefault(),this.updateFilterSort({urlParamString:null,reinitPanel:!0})}))}},gAnnouncement={announcement:document.querySelector(".g-announcement"),dots:document.querySelector(".g-announcement .js-announcement-dots"),disableAutoplay:function(){this.announcement.classList.add("is-autoplay-disabled")},enableAutoplay:function(){this.announcement.classList.remove("is-autoplay-disabled")},autoplayInterval:null,autoplay:function(){if(!this.dots||!this.dots.dataset.autoplay)return!1;const t=this.dots.querySelectorAll("[data-announcement-trigger]"),e=parseInt(this.dots.dataset.autoplayInterval);on("body","mouseover",".g-announcement",(()=>{this.disableAutoplay()})),on("body","mouseout",".g-announcement",(()=>{this.enableAutoplay()})),this.autoplayInterval=setInterval((()=>{if(this.announcement.classList.contains("is-autoplay-disabled"))return!1;const e=this.dots.querySelector("[data-announcement-trigger].is-active"),r=parseInt(e.dataset.announcementTrigger),n=r<t.length-1?r+1:0;this.updateActiveMessage(n)}),1e3*e)},updateAnnouncementHeight:function(){const t=this.announcement.querySelector(".js-announcement-block.is-active");t&&(this.announcement.querySelector(".js-announcement-blocks").style.height=`${t.offsetHeight}px`),root.style.setProperty("--s-announcement-dynamic",`${this.announcement?this.announcement.offsetHeight:0}px`)},updateActiveMessage:function(t){this.announcement.querySelectorAll(".js-announcement-block").forEach(((e,r)=>{r==t?e.classList.add("is-active"):e.classList.remove("is-active")})),this.announcement.querySelectorAll("[data-announcement-trigger]").forEach(((e,r)=>{r==t?e.classList.add("is-active"):e.classList.remove("is-active")})),this.updateAnnouncementHeight()},init:function(){this.announcement&&this.announcement.children.length>0&&(this.autoplay(),this.updateAnnouncementHeight(),on("body","click","[data-announcement-trigger]",(t=>{const e=t.target.closest("[data-announcement-trigger]"),r=parseInt(e.dataset.announcementTrigger);this.updateActiveMessage(r),clearInterval(this.autoplayInterval)})))}},pAccount={recoverClose:function(){root.classList.remove("is-account-recover-active"),history.replaceState(null,null," ");const t=document.querySelector("#account-recover-email");autoFocus&&t&&t.blur()},recoverOpen:function(t=!0){root.classList.add("is-account-recover-active"),history.replaceState(null,null,"#recover");const e=document.querySelector("#account-recover-email");t&&e&&e.focus()},init:function(){on("body","click",".js-account-recover-close",this.recoverClose),on("body","click",".js-account-recover-open",this.recoverOpen),on("body","click",".js-account-recover-toggle",(t=>{root.classList.contains("is-account-recover-active")?this.recoverClose():this.recoverOpen()})),"#recover"==location.hash&&this.recoverOpen(!1)}};cWysiwygShopify.init(),cItemVariants.init(),cItemSellingPlan.init(),cItemQuantity.init(),cProductForm.init(),cCart.init(),cFiltersSort.init(),gAnnouncement.init(),pAccount.init(),document.addEventListener("DOMContentLoaded",(()=>{cInfiniteScroll.init(),ariaFocusManager.init()}));